//
// GENERATED CODE, DO NOT EDIT THIS FILE!
//
// Generated by ConcreteChoiceGenerator for ISA.  ISO2002 ID# _RHwDc_pfEeCLMa5EIHtDrg.
//

using BeneficialStrategies.Iso20022.Components;
using BeneficialStrategies.Iso20022.ExternalSchema;
using System.Xml;
using System.Xml.Linq;

namespace BeneficialStrategies.Iso20022.Choices.ISAPortfolio2Choice;

/// <summary>
/// UK government schemes to encourage individuals to invest in securities based unit and investment trusts, offering certain tax benefits. These are not investment in their own right but are tax exempt wrappers in which individuals can hold equities, bonds and funds to shelter them from income and capital gains tax. 
/// The Individual Savings Account (ISA) is provided only by UK based financial institutions.
/// </summary>
public partial record ISA : ISAPortfolio2Choice_
     , IIsoXmlSerilizable<ISA>
{
    #nullable enable
    
    /// <summary>
    /// ISA that was issued during the current fiscal year.
    /// </summary>
    public CurrentYearType1Choice_? CurrentYear { get; init; } 
    /// <summary>
    /// Indicates whether the ISA contains a cash component asset for transfer.
    /// </summary>
    public required IsoYesNoIndicator CashComponentIndicator { get; init; } 
    /// <summary>
    /// Selection of investment plans issued during previous years.
    /// </summary>
    public PreviousYear3? PreviousYears { get; init; } 
    /// <summary>
    /// Specifies the amounts already subscribed for the current year.
    /// </summary>
    public required SubscriptionInformation1 CurrentYearSubscriptionDetails { get; init; } 
    
    #nullable disable
    
    
    /// <summary>
    /// Used to format the various primative types during serialization.
    /// </summary>
    public static SerializationFormatter SerializationFormatter { get; set; } = SerializationFormatter.GlobalInstance;
    
    /// <summary>
    /// Serializes the state of this record according to Iso20022 specifications.
    /// </summary>
    public override void Serialize(XmlWriter writer, string xmlNamespace)
    {
        if (CurrentYear is CurrentYearType1Choice_ CurrentYearValue)
        {
            writer.WriteStartElement(null, "CurYr", xmlNamespace );
            CurrentYearValue.Serialize(writer, xmlNamespace);
            writer.WriteEndElement();
        }
        writer.WriteStartElement(null, "CshCmpntInd", xmlNamespace );
        writer.WriteValue(SerializationFormatter.IsoYesNoIndicator(CashComponentIndicator)); // data type YesNoIndicator System.String
        writer.WriteEndElement();
        if (PreviousYears is PreviousYear3 PreviousYearsValue)
        {
            writer.WriteStartElement(null, "PrvsYrs", xmlNamespace );
            PreviousYearsValue.Serialize(writer, xmlNamespace);
            writer.WriteEndElement();
        }
        writer.WriteStartElement(null, "CurYrSbcptDtls", xmlNamespace );
        CurrentYearSubscriptionDetails.Serialize(writer, xmlNamespace);
        writer.WriteEndElement();
    }
    public static new ISA Deserialize(XElement element)
    {
        throw new NotImplementedException();
    }
}
