//
// GENERATED CODE, DO NOT EDIT THIS FILE!
//
// Generated by ComponentGenerator for BillingTaxRegion1.  ISO2002 ID# _6Th8IpqlEeGSON8vddiWzQ_1934585019.
//

using BeneficialStrategies.Iso20022.Choices;
using BeneficialStrategies.Iso20022.ExternalSchema;
using BeneficialStrategies.Iso20022.UserDefined;
using System.Xml;
using System.Xml.Linq;

namespace BeneficialStrategies.Iso20022.Components;

/// <summary>
/// Tax region that levies a tax on the services in a statement.
/// </summary>
public partial record BillingTaxRegion1
     : IIsoXmlSerilizable<BillingTaxRegion1>
{
    #nullable enable
    
    /// <summary>
    /// Specifies a particular unique zone of taxes assigned by taxing authorities. A tax region number is unique. Every account is considered to reside within a tax region, although some tax regions may not charge taxes on services.
    /// </summary>
    public required IsoMax40Text RegionNumber { get; init; } 
    /// <summary>
    /// Name associated with a specific tax region number.
    /// </summary>
    public required IsoMax40Text RegionName { get; init; } 
    /// <summary>
    /// Specifies the financial institution’s customer tax identification number. ||Usage: |This is the number passed from the financial institution to the taxing authority to indicate the specific customer tied to the taxes calculated for this tax region and group of delivered services. It is typically the tax identification tied to a customer’s account.
    /// </summary>
    public required IsoMax40Text CustomerTaxIdentification { get; init; } 
    /// <summary>
    /// Date on which the tax calculation was performed. ||Usage: |This date can be used to verify the tax rate value on the calculation date.
    /// </summary>
    public IsoISODate? PointDate { get; init; } 
    /// <summary>
    /// Tax information that relates to the sending financial institution.
    /// </summary>
    public BillingTaxIdentification1? SendingFinancialInstitution { get; init; } 
    /// <summary>
    /// Unique number to be used by the customer to cross-reference between the tax region information and a tax invoice or notice.
    /// </summary>
    public IsoMax40Text? InvoiceNumber { get; init; } 
    /// <summary>
    /// Tax values are based on tax calculation method C.
    /// </summary>
    public BillingMethod4? MethodC { get; init; } 
    /// <summary>
    /// Total tax amount expressed in the account’s settlement (or charging) currency. ||Usage: This total sums the individual service level taxes as calculated for each service by methods A, B and D. The sum of these amounts across all tax regions for the statement is displayed as the tax total sum in the compensation section.
    /// </summary>
    public required AmountAndDirection34 SettlementAmount { get; init; } 
    /// <summary>
    /// Total amount of all taxes for a specific customer within the tax region expressed in the tax region’s host currency. ||Usage: It is the same value as total tax amount and is included for the specific use of tax calculation methods A, B and D.
    /// </summary>
    public required AmountAndDirection34 TaxDueToRegion { get; init; } 
    
    #nullable disable
    
    
    /// <summary>
    /// Used to format the various primative types during serialization.
    /// </summary>
    public static SerializationFormatter SerializationFormatter { get; set; } = SerializationFormatter.GlobalInstance;
    
    /// <summary>
    /// Serializes the state of this record according to Iso20022 specifications.
    /// </summary>
    public void Serialize(XmlWriter writer, string xmlNamespace)
    {
        writer.WriteStartElement(null, "RgnNb", xmlNamespace );
        writer.WriteValue(SerializationFormatter.IsoMax40Text(RegionNumber)); // data type Max40Text System.String
        writer.WriteEndElement();
        writer.WriteStartElement(null, "RgnNm", xmlNamespace );
        writer.WriteValue(SerializationFormatter.IsoMax40Text(RegionName)); // data type Max40Text System.String
        writer.WriteEndElement();
        writer.WriteStartElement(null, "CstmrTaxId", xmlNamespace );
        writer.WriteValue(SerializationFormatter.IsoMax40Text(CustomerTaxIdentification)); // data type Max40Text System.String
        writer.WriteEndElement();
        if (PointDate is IsoISODate PointDateValue)
        {
            writer.WriteStartElement(null, "PtDt", xmlNamespace );
            writer.WriteValue(SerializationFormatter.IsoISODate(PointDateValue)); // data type ISODate System.DateOnly
            writer.WriteEndElement();
        }
        if (SendingFinancialInstitution is BillingTaxIdentification1 SendingFinancialInstitutionValue)
        {
            writer.WriteStartElement(null, "SndgFI", xmlNamespace );
            SendingFinancialInstitutionValue.Serialize(writer, xmlNamespace);
            writer.WriteEndElement();
        }
        if (InvoiceNumber is IsoMax40Text InvoiceNumberValue)
        {
            writer.WriteStartElement(null, "InvcNb", xmlNamespace );
            writer.WriteValue(SerializationFormatter.IsoMax40Text(InvoiceNumberValue)); // data type Max40Text System.String
            writer.WriteEndElement();
        }
        if (MethodC is BillingMethod4 MethodCValue)
        {
            writer.WriteStartElement(null, "MtdC", xmlNamespace );
            MethodCValue.Serialize(writer, xmlNamespace);
            writer.WriteEndElement();
        }
        writer.WriteStartElement(null, "SttlmAmt", xmlNamespace );
        SettlementAmount.Serialize(writer, xmlNamespace);
        writer.WriteEndElement();
        writer.WriteStartElement(null, "TaxDueToRgn", xmlNamespace );
        TaxDueToRegion.Serialize(writer, xmlNamespace);
        writer.WriteEndElement();
    }
    public static BillingTaxRegion1 Deserialize(XElement element)
    {
        throw new NotImplementedException();
    }
}
